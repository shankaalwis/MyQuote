<!-- app/views/users/_form.html.erb -->
<%= form_with(model: user, local: true) do |f| %>
  <!-- Show validation errors -->
  <% if user.errors.any? %>
    <div class="alert alert-danger">
      <ul><% user.errors.full_messages.each { |m| concat content_tag(:li, m) } %></ul>
    </div>
  <% end %>

  <!-- First name -->
  <div class="mb-3">
    <%= f.label :fname, class: 'form-label' %>
    <%= f.text_field :fname, class: 'form-control', required: true %>
  </div>

  <!-- Last name -->
  <div class="mb-3">
    <%= f.label :lname, class: 'form-label' %>
    <%= f.text_field :lname, class: 'form-control', required: true %>
  </div>

  <!-- Email -->
  <div class="mb-3">
    <%= f.label :email, class: 'form-label' %>
    <%= f.email_field :email, class: 'form-control', required: true %>
  </div>

  <!-- Password (required on create) -->
  <div class="mb-3">
    <%= f.label :password, class: 'form-label' %>
    <%= f.password_field :password, class: 'form-control', autocomplete: 'new-password', required: f.object.new_record? %>
  </div>

  <!-- Only admins can set status/role -->
  <% if is_administrator? %>
    <div class="mb-3">
      <%= f.label :status, class: 'form-label' %>
      <%= f.select :status, User::STATUSES, {}, class: 'form-select' %>
    </div>
    <div class="form-check mb-3">
      <%= f.check_box :is_admin, class: 'form-check-input' %>
      <%= f.label :is_admin, class: 'form-check-label' %>
    </div>
  <% end %>

  <%= f.submit class: 'btn btn-primary' %>
<% end %>
